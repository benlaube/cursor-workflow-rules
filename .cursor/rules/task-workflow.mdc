---
description: Standard development task workflow from pre-flight to post-flight. Applies throughout development lifecycle.
version: 1.4.0
created: 12-04-2025
lastUpdated: 04-12-2025 16:20:33 EST
alwaysApply: true
globs: ""
type: Workflow Integration Rule - Manages task lifecycle and development workflow
applicability: When files matching globs are edited.
dependencies: []
relatedCommands: [[create-start-scripts.md](../commands/create-start-scripts.md), [project-audit.md](../commands/project-audit.md), [audit-security.md](../commands/audit-security.md)]
relatedRules: [[pre-flight-check.mdc](./pre-flight-check.mdc), [pr-review-check.mdc](./pr-review-check.mdc), [auto-heal.mdc](./auto-heal.mdc), [environment.mdc](./environment.mdc), [date-time.mdc](./date-time.mdc), [workflow-standards-documentation-maintenance.mdc](./workflow-standards-documentation-maintenance.mdc), [documentation-dependency-tracking.mdc](./documentation-dependency-tracking.mdc), [git-workflow-integration.mdc](./git/git-workflow-integration.mdc), [git-branch-naming.mdc](./git/git-branch-naming.mdc), [git-commit-messages.mdc](./git/git-commit-messages.mdc), [git-pr-preparation.mdc](./git/git-pr-preparation.mdc)]
relatedStandards: [[project-planning/documentation-management.md](../standards/project-planning/documentation-management.md), [process/checklists/pre_flight_checklist_v1_0.md](../standards/process/checklists/pre_flight_checklist_v1_0.md), [process/checklists/pr_review_checklist_v1_0.md](../standards/process/checklists/pr_review_checklist_v1_0.md)]
---

# Task Workflow Rule

## 1. Before Starting a Task (Pre-Flight)

**Pre-flight validation runs automatically** (see `.cursor/rules/pre-flight-check.mdc`).

Before writing code, the agent MUST:
1.  **Pre-Flight Validation:** The `pre-flight-check.mdc` rule automatically validates:
    - Git status (clean working tree, synced with remote) - See `git/git-workflow-integration.mdc`
    - Dependencies (installed and up to date)
    - Environment (.env configured, secrets loaded)
    - Baseline integrity (tests pass, build succeeds, linter clean)
    - See `standards/process/checklists/pre_flight_checklist_v1_0.md` for complete checklist
2.  **Check Structure:** Verify project follows `standards/project-structure.md`
3.  **Verify Environment:** Ensure app is launchable via `.cursor/commands/launch.md`. If `start_app.sh` doesn't exist, run `create-start-scripts` command
4.  **Temporal Awareness:** For time-sensitive tasks, verify current date using `date` command (see `.cursor/rules/date-time.mdc`)
5.  **Check Notion Tasks (If Project is Bound):** If a Notion Project Binding rule exists:
    - Query the Notion "Dev Tasks" database for open tasks linked to this project.
    - Review any high-priority or in-progress tasks that might be relevant to current work.
    - Consider whether the current task should be tracked in Notion.

## 2. During Development

1.  **Atomic Changes:** Make small, testable changes.
2.  **Self-Correction:** If a command fails, attempt to self-heal (see `.cursor/rules/auto-heal.mdc`) before asking the user.
3.  **Tool Usage:** Use specialized tools (`read_file`, `grep`) over generic terminal commands.
4.  **Function Documentation:** Every function must have comments with description and dependencies (per user rules).
5.  **Database Schema Requirements:** When creating/modifying database tables:
    - Ensure tables and fields have descriptions
    - Use descriptive names (not abbreviated)
    - Include `created_at` and `updated_at` columns
    - See user rules for complete requirements
6.  **Notion Task Creation (If Project is Bound):** If a Notion Project Binding rule exists:
    - When discovering bugs that can't be fixed immediately, create a task in Notion "Dev Tasks" database.
    - When work is incomplete and must be paused, create a task to track the remaining work.
    - When identifying future development items or technical debt, create tasks proactively.
    - Follow the guidelines in the Notion Task Creation rule (created by `.cursor/commands/notion-task-creation`).

## 3. After Completing a Task (Post-Flight)

**PR review validation runs automatically** (see `.cursor/rules/pr-review-check.mdc`).

Before confirming completion:
1.  **PR Review Validation:** The `pr-review-check.mdc` rule automatically validates:
    - Code quality (lint, format, types)
    - Functionality (build, tests)
    - Security (no secrets, input validation)
    - Documentation (functions documented, CHANGELOG updated)
    - See `standards/process/checklists/pr_review_checklist_v1_0.md` for complete checklist
2.  **Update Docs:** 
    - Update `CHANGELOG.md` for user-facing changes (see `standards/project-planning/documentation-management.md` Section 7 for format guidelines).
    - For database schema changes, update `CHANGELOG-DATABASE.md` with timestamped entries (per user rules).
    - Update relevant `standards/` if architecture changed.
    - Follow `.cursor/rules/workflow-standards-documentation-maintenance.mdc` for comprehensive documentation update requirements.
3.  **Commit Uncommitted Changes (if any):**
    - Check for uncommitted changes: `git status --porcelain`
    - If uncommitted changes exist:
      - Stage all changes: `git add .`
      - Generate semantic commit message from changes (follow Conventional Commits format)
      - Commit: `git commit -m "{type}({scope}): {description}"`
      - Validate commit message follows standards (see `git/git-commit-messages.mdc`)
    - If no uncommitted changes: âœ… Proceed to validation
4.  **Verify Launch:** Run `launch` command (`.cursor/commands/launch.md`) one last time to ensure no regression.
5.  **Launch & Debug Dev Server:** After completing a task or integration:
    - Launch the development server using `launch` command (`.cursor/commands/launch.md`) so the user can see changes and test them. This should be done automatically unless the user explicitly requests otherwise.
    - The `launch` command uses `start_app.sh` (or generates it via `create-start-scripts` if missing)
    - If errors occur during launch, use `launch-debug-fix` command (`.cursor/commands/launch-debug-fix.md` - if available) to iteratively debug and auto-heal errors until the dev environment is healthy.
    - The `launch-debug-fix` command integrates with `.cursor/rules/auto-heal.mdc` for automatic error recovery (port conflicts, missing dependencies, database connections, etc.).
6.  **Push to Remote (if ready for PR):**
    - Only push if user requests PR or explicitly asks to push
    - Validate branch and commits before pushing (see `git/git-pr-preparation.mdc`)
    - Push branch: `git push -u origin {branch-name}` (if not already pushed)
7.  **Update Notion (If Project is Bound):** If a Notion Project Binding rule exists:
    - Update any related Notion tasks: Set status to "Done" and add a comment with commit hash/PR number.
    - Sync project metadata to Notion "Dev Projects" database if significant changes occurred (see `.cursor/commands/notion-sync-project-metadata`).
    - Create new tasks for any follow-up work or technical debt discovered during the task.

## 4. Periodic Maintenance & Audits

Before major releases, refactoring, or weekly/monthly for active projects, run periodic audits:

- **Project Audit:** Run `project-audit` command (`.cursor/commands/project-audit.md`) for full project structure validation.
- **Security Audit:** Run `security_audit` command (`.cursor/commands/audit-security.mdc`) for security vulnerabilities scan.
- **Full Health Check:** Run `full-project-health-check` meta-command to run all audits together.

**Checklists:**
- `standards/process/checklists/project_audit_checklist_v1_0.md`
- `standards/security/security-audit-checklist.md`

**When to Run:**
- When onboarding a new repository
- Before major refactoring
- Before major releases
- Weekly/monthly for active projects

See `AGENTS.md` Section 6.5 for full lifecycle context.

## 5. Documentation & Versioning

- **Documentation Standards:** Follow `standards/project-planning/documentation-management.md` for documentation management rules.
- **Documentation Maintenance:** Follow `.cursor/rules/workflow-standards-documentation-maintenance.mdc` for comprehensive documentation update requirements.
- **Changelogs:** 
  - Update `CHANGELOG.md` for user-facing changes (see `standards/project-planning/documentation-management.md` Section 7 for format guidelines).
  - Update `CHANGELOG-DATABASE.md` for database schema changes (per user rules).
- **Versioning:** If editing a standard or documentation file, increment the version metadata at the top of the file (see `.cursor/rules/environment.mdc` for version numbering rules).
- **New Features:** If you added a new feature, ensure it is documented in `standards/` or `docs/`.

## 6. Related Rules & Standards

This rule integrates with the following related rules and standards:

- **`.cursor/rules/auto-heal.mdc`** - Error recovery strategies and autonomous runtime management (auto-healing for ports, dependencies, database connections, containers)
- **`.cursor/rules/environment.mdc`** - Environment setup, versioning standards, temporal awareness, and container management
- **`.cursor/rules/workflow-standards-documentation-maintenance.mdc`** - Comprehensive documentation maintenance requirements
- **`.cursor/rules/git/git-workflow-integration.mdc`** - Coordinates git operations and validates git status
- **`.cursor/rules/git/git-branch-naming.mdc`** - Enforces branch naming conventions and prevents direct commits to main/master
- **`.cursor/rules/git/git-commit-messages.mdc`** - Enforces Conventional Commits format and pre-commit security checks
- **`.cursor/rules/git/git-pr-preparation.mdc`** - Validates branch and commits before PR, auto-generates PR description
- **`AGENTS.md` Section 6** - Standard Developer Lifecycle with complete command and checklist references
- **`standards/project-planning/documentation-management.md`** - Documentation management standards and changelog format guidelines

---

## Related Files

- **Commands:**
  - [pre-flight-check.md](../commands/pre-flight-check.md) - Environment validation before coding
  - [pr-review-check.md](../commands/pr-review-check.md) - Pre-PR validation
  - [create-start-scripts.md](../commands/create-start-scripts.md) - Generate launch scripts
  - [project-audit.md](../commands/project-audit.md) - Project structure validation
  - [audit-security.mdc](../commands/audit-security.mdc) - Security vulnerabilities scan
- **Rules:**
  - [auto-heal.mdc](./auto-heal.mdc) - Error recovery strategies
  - [environment.mdc](./environment.mdc) - Environment setup standards
  - [date-time.mdc](./date-time.mdc) - Date and time awareness
  - [workflow-standards-documentation-maintenance.mdc](./workflow-standards-documentation-maintenance.mdc) - Documentation maintenance
  - [documentation-dependency-tracking.mdc](./documentation-dependency-tracking.mdc) - Dependency tracking
  - [git-workflow-integration.mdc](./git/git-workflow-integration.mdc) - Git workflow coordination
  - [git-branch-naming.mdc](./git/git-branch-naming.mdc) - Branch naming conventions
  - [git-commit-messages.mdc](./git/git-commit-messages.mdc) - Commit message validation
  - [git-pr-preparation.mdc](./git/git-pr-preparation.mdc) - PR preparation
- **Standards:**
  - [documentation-management.md](../../standards/project-planning/documentation-management.md) - Documentation management standards
  - [pre_flight_checklist_v1_0.md](../../standards/process/checklists/pre_flight_checklist_v1_0.md) - Pre-flight checklist
  - [pr_review_checklist_v1_0.md](../../standards/process/checklists/pr_review_checklist_v1_0.md) - PR review checklist

---

## How to Use This Rule

**This rule applies automatically throughout the development lifecycle.**

**Agents should follow this workflow:**

**Before Starting:**
1. Run `pre-flight-check` command to validate environment
2. Launch dev environment with `./start_app.sh` (or generate with `create-start-scripts`)
3. Check Notion tasks if project is bound

**During Development:**
1. Make atomic changes
2. Self-correct using `auto-heal.mdc` strategies
3. Document functions and database schema
4. Create Notion tasks for bugs/incomplete work

**After Completing:**
1. Run `pr-review-check` command
2. Update `CHANGELOG.md` and relevant docs
3. Launch & debug dev server
4. Update Notion tasks if project is bound

**Periodic Maintenance:**
- Run `project-audit` before refactoring or releases
- Run `security_audit` for security-sensitive changes
- Follow `.cursor/rules/workflow-standards-documentation-maintenance.mdc` for doc updates