---
description: Defines behavior and standards for AI agents interacting with this repository
version: 1.2.0
created: 12-04-2025
lastUpdated: 04-12-2025 16:20:33 EST
alwaysApply: true
globs: ""
type: Auto-Applied Behavioral Rule - Guides AI agent behavior and coding standards
applicability: When files matching globs are edited.
dependencies: []
relatedCommands: [launch.md, create-start-scripts.md]
relatedRules: [[environment.mdc](./environment.mdc), [task-workflow.mdc](./task-workflow.mdc)]
relatedStandards: [[project-planning/documentation-management.md](../standards/project-planning/documentation-management.md), [database/schema.md](../standards/database/schema.md)]
---

# AI Interaction Rules & Persona

This document defines the behavior and standards for AI agents (Cursor, Windsurf, etc.) interacting with this repository.

## Core Directives

### 1. Context Awareness & Scope
**Rule:** Always check `standards/` before generating code. Do not guess conventions.
**Scope Clarification:** You are the **Developer Agent**.
- `AGENTS.md` is your memory.
- `standards/` are your laws.
- The **Runtime Agents** (chatbots inside the app) do NOT see these files. Do not code dependencies assuming they can read `AGENTS.md`.
**Why:** We want consistent architecture across all projects. Guessing leads to "drift".
**Action:**
- Before creating a React component, check `standards/frontend-react.md` (if available).
- Before creating a database table, check `standards/database/schema.md`.

### 2. Module Usage (Don't Reinvent the Wheel)
**Rule:** Check `modules/` for existing solutions before writing new boilerplate.
**Action:**
- Need to log something? Use `modules/logger-module`.
- Need to handle an API error? Use `modules/error-handler`.
- Need to read a secret? Use `modules/settings-manager`.
- **How to Use**: Import the module directly if in a monorepo, or copy the relevant files to your project's `lib/` or `modules/` folder if starting fresh.

### 3. Safety First
**Rule:** 
- Never commit secrets (API keys, passwords).
- Always verify file paths before writing.
- Run `npm audit` if installing new packages.
**Action:** Always use `env.example` patterns and the `settings-manager` for secrets.

## Coding Behavior

### Refactoring Thresholds
**Rule:** If you see a file > 200 lines, propose a refactor into a utility or sub-component.

### Error Handling Standard
**Rule:** Every external call (API, DB) must be wrapped in the project's standard Result pattern or `try/catch`.

### Documentation Hygiene
**Rule:** Update the `CHANGELOG.md` (if present) or the relevant documentation file in `standards/` when changing architectural patterns.

### Database Hygiene (CRITICAL)
**Rule:** Every database migration must include `COMMENT ON` statements for every table and column created.
**Why:** To ensure the database is self-documenting for future AI agents and developers.

### Application Launching (CRITICAL)
**Rule:** Always use the standardized launch process. Never launch applications via ad-hoc commands.
**Actions:**
- **Check for Launch Scripts:** First check if `start_app.sh` exists in project root
  - If missing: Run `create-start-scripts` command (`.cursor/commands/create-start-scripts.md`) to generate launch scripts
  - If exists: Use `start_app.sh` directly
- **Launch Process:**
  - Use `launch` command (`.cursor/commands/launch.md`) which uses `start_app.sh`
  - For dev: `./start_app.sh dev` or use `launch` command with `env=dev`
  - For prod: `./start_app.sh prod` or use `launch` command with `env=prod`
  - The launch process handles: stack detection, dependency installation, environment validation, port management, Supabase startup (if applicable)
- **Error Recovery:**
  - If launch fails, use `launch-debug-fix` command (`.cursor/commands/launch-debug-fix.md`) for iterative debugging
  - Launch errors auto-heal via `auto-heal.mdc` rule (port conflicts, missing dependencies, etc.)
- **When to Launch:**
  - After completing a task (see `task-workflow.mdc` Section 3.5)
  - When user requests to "start the app", "run the server", or "launch"
  - Before testing changes to ensure they work
**Why:** Ensures consistent, reliable application launches across all projects. Prevents port conflicts, missing dependencies, and configuration errors.

### Notion Integration (When Project is Bound)
**Rule:** If a Notion Project Binding rule exists (see `.cursor/commands/notion-create-project-binding-rule`), integrate with Notion for task and project management.
**Actions:**
- **Task Creation:** When discovering bugs, incomplete work, or future development items, create tasks in Notion "Dev Tasks" database (see `.cursor/commands/notion-task-creation` for guidelines).
- **Task Updates:** When completing work, update task status in Notion with commit/PR references.
- **Project Metadata:** Sync project metadata (status, last updated, etc.) to Notion "Dev Projects" database when significant changes occur (see `.cursor/commands/notion-sync-project-metadata`).
- **Check Existing Tasks:** Before starting work, check Notion "Dev Tasks" database for open tasks linked to this project.
**Why:** Maintains visibility and traceability between code work and project management.

## Self-Correction
- **Analyze Errors:** If a command fails, read the error message. Do not blindly retry the same command.
- **Clarify Ambiguity:** If a user request conflicts with a rule in `standards/`, explicitly ask: "The standard says X, but you asked for Y. Should I update the standard or make an exception?"

---

## Related Files

- **Rules:**
  - [environment.mdc](./environment.mdc) - Environment expectations and runtime standards
  - [task-workflow.mdc](./task-workflow.mdc) - Development workflow integration
  - [auto-heal.mdc](./auto-heal.mdc) - Error recovery and auto-healing strategies
- **Commands:**
  - [launch.md](../commands/launch.md) - Standardized application launch command
  - [create-start-scripts.md](../commands/create-start-scripts.md) - Generate launch scripts
- **Standards:**
  - [documentation-management.md](../../standards/project-planning/documentation-management.md) - Documentation management standards
  - [schema.md](../../standards/database/schema.md) - Database schema conventions

---

## How to Use This Rule

**This rule applies automatically to all AI agent interactions with this repository.**

**Agents should:**
- Check `standards/` before generating code (don't guess conventions)
- Use existing modules from `modules/` directory instead of reinventing the wheel
- Never commit secrets - always use environment variables
- Update `CHANGELOG.md` when changing architectural patterns
- Review & Update `README.md` when changes made outdate information within the README file.
- Include `COMMENT ON` statements for all database migrations
- Analyze errors and clarify ambiguities instead of blindly retrying commands
- Always use `launch` command (`.cursor/commands/launch.md`) or `start_app.sh` to launch applications (never use ad-hoc commands)
- Commit uncommitted changes before completing tasks (see `task-workflow.mdc` Section 3.3)